<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UMD æ ¼å¼ä½¿ç”¨æ¼”ç¤º</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .demo-section {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        .result {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .format-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }
        .esm-card {
            border-color: #007acc;
        }
        .umd-card {
            border-color: #28a745;
        }
        h3 {
            margin-top: 0;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <h1>ğŸ“¦ ESM + UMD åŒæ ¼å¼æ”¯æŒæ¼”ç¤º</h1>

    <div class="comparison">
        <div class="format-card esm-card">
            <h3>ğŸš€ ESM æ ¼å¼ (ç°ä»£æµè§ˆå™¨)</h3>
            <p><strong>ä¼˜åŠ¿ï¼š</strong></p>
            <ul>
                <li>æ”¯æŒæŒ‰éœ€å¯¼å…¥</li>
                <li>Tree-shaking ä¼˜åŒ–</li>
                <li>åŸç”Ÿæµè§ˆå™¨æ”¯æŒ</li>
                <li>å¤šå…¥å£æ”¯æŒ</li>
            </ul>
            <div class="code-block">import { add } from './dist/add.js';</div>
        </div>

        <div class="format-card umd-card">
            <h3>ğŸ”§ UMD æ ¼å¼ (å…¼å®¹æ€§)</h3>
            <p><strong>ä¼˜åŠ¿ï¼š</strong></p>
            <ul>
                <li>å…¼å®¹æ—§ç‰ˆæµè§ˆå™¨</li>
                <li>æ”¯æŒç›´æ¥scriptå¼•å…¥</li>
                <li>CommonJS/AMDå…¼å®¹</li>
                <li>å…¨å±€å˜é‡å¯ç”¨</li>
            </ul>
            <div class="code-block">&lt;script src="./dist/index.umd.js"&gt;&lt;/script&gt;</div>
        </div>
    </div>

    <div class="demo-section">
        <h2>ğŸ¯ æ–¹å¼1: UMD å…¨å±€å˜é‡ä½¿ç”¨</h2>
        <div class="code-block">// é€šè¿‡ script æ ‡ç­¾å¼•å…¥åï¼Œå…¨å±€å¯ç”¨
console.log('UMD å…¨å±€å˜é‡:', window.AjanuwViteBuildEsm);
console.log('add(5, 3):', AjanuwViteBuildEsm.add(5, 3));
console.log('sub(10, 4):', AjanuwViteBuildEsm.sub(10, 4));
console.log('foo(3, 4):', AjanuwViteBuildEsm.foo(3, 4));</div>
        <div id="umd-global-result" class="result">åŠ è½½ä¸­...</div>
    </div>

    <div class="demo-section">
        <h2>âš¡ æ–¹å¼2: ESM æŒ‰éœ€å¯¼å…¥ï¼ˆå¯¹æ¯”ï¼‰</h2>
        <div class="code-block">// ç°ä»£ ESM æ–¹å¼ï¼Œæ”¯æŒæŒ‰éœ€å¯¼å…¥
import { add, sub, foo } from './dist/index.js';
console.log('ESM add(5, 3):', add(5, 3));</div>
        <div id="esm-result" class="result">åŠ è½½ä¸­...</div>
    </div>

    <div class="demo-section">
        <h2>ğŸŒ CDN ä½¿ç”¨å¯¹æ¯”</h2>
        <div class="comparison">
            <div class="format-card umd-card">
                <h4>UMD CDN ä½¿ç”¨</h4>
                <div class="code-block">&lt;!-- ä¼ ç»Ÿæ–¹å¼ï¼Œå…¨å±€å¯ç”¨ --&gt;
&lt;script src="https://unpkg.com/ajanuw-vite-build-esm@1.0.0/dist/umd/index.js"&gt;&lt;/script&gt;
&lt;script&gt;
  const { add, sub, foo } = AjanuwViteBuildEsm;
  console.log(add(1, 2));
&lt;/script&gt;</div>
            </div>
            <div class="format-card esm-card">
                <h4>ESM CDN ä½¿ç”¨</h4>
                <div class="code-block">&lt;!-- ç°ä»£æ–¹å¼ï¼ŒæŒ‰éœ€å¯¼å…¥ --&gt;
&lt;script type="module"&gt;
  import { add } from 'https://unpkg.com/ajanuw-vite-build-esm@1.0.0/dist/esm/add.js';
  console.log(add(1, 2));
&lt;/script&gt;</div>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>ğŸ“Š æ ¼å¼é€‰æ‹©å»ºè®®</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #f8f9fa;">
                    <th style="padding: 10px; border: 1px solid #dee2e6;">ä½¿ç”¨åœºæ™¯</th>
                    <th style="padding: 10px; border: 1px solid #dee2e6;">æ¨èæ ¼å¼</th>
                    <th style="padding: 10px; border: 1px solid #dee2e6;">åŸå› </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">ç°ä»£æµè§ˆå™¨</td>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">ESM</td>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">åŸç”Ÿæ”¯æŒï¼ŒæŒ‰éœ€åŠ è½½</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">IE11 ç­‰æ—§æµè§ˆå™¨</td>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">UMD</td>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">å…¼å®¹æ€§æœ€å¥½</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">CDN ç›´æ¥å¼•å…¥</td>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">UMD</td>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">å…¨å±€å˜é‡å¯ç”¨</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">æ„å»ºå·¥å…·é¡¹ç›®</td>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">ESM</td>
                    <td style="padding: 10px; border: 1px solid #dee2e6;">Tree-shaking ä¼˜åŒ–</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- UMD æ–‡ä»¶å¼•å…¥ -->
    <script src="./dist/umd/index.js"></script>

    <!-- æ¼”ç¤ºè„šæœ¬ -->
    <script>
        // UMD å…¨å±€å˜é‡æ¼”ç¤º
        try {
            if (typeof AjanuwViteBuildEsm !== 'undefined') {
                const results = [
                    `âœ… UMD å…¨å±€å˜é‡å¯ç”¨: ${typeof AjanuwViteBuildEsm}`,
                    `åŒ…å«å‡½æ•°: ${Object.keys(AjanuwViteBuildEsm).join(', ')}`,
                    `add(5, 3) = ${AjanuwViteBuildEsm.add(5, 3)}`,
                    `sub(10, 4) = ${AjanuwViteBuildEsm.sub(10, 4)}`,
                    `foo(3, 4) = ${AjanuwViteBuildEsm.foo(3, 4)} (3Â² + 4Â² = 25)`
                ];
                document.getElementById('umd-global-result').textContent = results.join('\n');
            } else {
                throw new Error('AjanuwViteBuildEsm å…¨å±€å˜é‡æœªæ‰¾åˆ°');
            }
        } catch (error) {
            document.getElementById('umd-global-result').textContent =
                `âŒ UMD åŠ è½½å¤±è´¥: ${error.message}`;
        }

        console.log('ğŸ”§ UMD æ¼”ç¤º');
        console.log('å…¨å±€å˜é‡:', window.AjanuwViteBuildEsm);
        console.log('å¯ç”¨å‡½æ•°:', Object.keys(window.AjanuwViteBuildEsm || {}));
    </script>

    <!-- ESM å¯¹æ¯”æ¼”ç¤º -->
    <script type="module">
        try {
            const { add, sub, foo } = await import('./dist/esm/index.js');

            const results = [
                `âœ… ESM æ¨¡å—å¯¼å…¥æˆåŠŸ`,
                `add(5, 3) = ${add(5, 3)}`,
                `sub(10, 4) = ${sub(10, 4)}`,
                `foo(3, 4) = ${foo(3, 4)} (3Â² + 4Â² = 25)`,
                `ğŸ¯ æ”¯æŒæŒ‰éœ€å¯¼å…¥ï¼Œå‡å°‘åŒ…ä½“ç§¯`
            ];

            document.getElementById('esm-result').textContent = results.join('\n');

            console.log('ğŸš€ ESM æ¼”ç¤º');
            console.log('ESM å¯¼å…¥æˆåŠŸ:', { add, sub, foo });
        } catch (error) {
            document.getElementById('esm-result').textContent =
                `âŒ ESM å¯¼å…¥å¤±è´¥: ${error.message}`;
        }
    </script>
</body>
</html>